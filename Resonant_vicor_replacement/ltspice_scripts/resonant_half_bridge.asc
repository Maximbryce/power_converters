Version 4
SHEET 1 2776 1356
WIRE -1456 -1776 -1520 -1776
WIRE -1456 -1696 -1504 -1696
WIRE -1440 -1616 -1456 -1616
WIRE -1440 -1536 -1456 -1536
WIRE -1312 -1184 -1776 -1184
WIRE -960 -1184 -1312 -1184
WIRE -32 -1088 -48 -1088
WIRE 80 -1088 48 -1088
WIRE 224 -1088 80 -1088
WIRE 224 -1072 224 -1088
WIRE 224 -1072 208 -1072
WIRE 320 -1072 224 -1072
WIRE -864 -1024 -880 -1024
WIRE -704 -1024 -800 -1024
WIRE -480 -1024 -624 -1024
WIRE -288 -1024 -400 -1024
WIRE -176 -1024 -288 -1024
WIRE 800 -1024 688 -1024
WIRE 912 -1024 800 -1024
WIRE -960 -976 -960 -1008
WIRE -880 -976 -880 -1024
WIRE -880 -976 -960 -976
WIRE 800 -976 800 -1024
WIRE 912 -976 912 -1024
WIRE -1776 -960 -1776 -1184
WIRE -288 -960 -288 -1024
WIRE -176 -960 -176 -1024
WIRE -48 -960 -48 -1088
WIRE -1312 -944 -1312 -1184
WIRE 320 -928 320 -1008
WIRE 688 -928 688 -1024
WIRE 688 -928 320 -928
WIRE -960 -912 -960 -976
WIRE 208 -912 208 -1008
WIRE 768 -912 208 -912
WIRE -960 -896 -960 -912
WIRE 208 -832 208 -912
WIRE 320 -832 320 -928
WIRE 768 -832 768 -912
WIRE 800 -832 800 -912
WIRE 800 -832 768 -832
WIRE 912 -832 912 -896
WIRE 912 -832 800 -832
WIRE -480 -816 -720 -816
WIRE -288 -816 -288 -880
WIRE -288 -816 -400 -816
WIRE -176 -816 -176 -880
WIRE -176 -816 -288 -816
WIRE -960 -800 -960 -816
WIRE -48 -768 -48 -880
WIRE 208 -768 -48 -768
WIRE 320 -768 208 -768
WIRE -1008 -720 -1088 -720
WIRE -1776 -624 -1776 -880
WIRE -1312 -624 -1312 -880
WIRE -1312 -624 -1776 -624
WIRE -960 -624 -960 -704
WIRE -960 -624 -1312 -624
WIRE -720 -624 -720 -816
WIRE -720 -624 -960 -624
FLAG -48 -768 0
FLAG -1776 -1184 Vin+
FLAG 912 -1024 Vout+
FLAG 912 -832 Vout-
FLAG -960 -912 Vc+
FLAG -1008 -1024 VdriveA+
FLAG -1088 -720 VdriveB-
FLAG -1456 -1536 0
FLAG -1504 -1696 VC+
FLAG -1600 -1776 VdriveA+
FLAG -1536 -1616 VdriveB-
FLAG 80 -1088 Vsec+
FLAG -288 -1024 Vpri+
FLAG -960 -624 0
SYMBOL nmos -1008 -1104 R0
WINDOW 3 -175 46 Left 2
SYMATTR Value irf135b203
SYMATTR InstName M2
SYMATTR Prefix X
SYMBOL cap 784 -976 R0
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL cap -864 -1008 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C2
SYMATTR Value 275n
SYMBOL ind2 -272 -976 M0
SYMATTR InstName L1
SYMATTR Value 40.8µ
SYMATTR Type ind
SYMBOL ind2 -32 -864 R180
WINDOW 0 36 80 Left 2
WINDOW 3 -109 44 Left 2
SYMATTR InstName L2
SYMATTR Value 91.8m
SYMATTR Type ind
SYMBOL ind -720 -1008 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -3 67 VBottom 2
SYMATTR InstName L3
SYMATTR Value 4.8µ
SYMBOL voltage -1440 -1632 R0
WINDOW 3 82 62 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 {Vdrive} 0 10n 10n {LOW_ON_TIME} {SWITCHPERIOD})
SYMATTR InstName V3
SYMBOL nmos -1008 -800 R0
WINDOW 3 -175 46 Left 2
SYMATTR Value irf135b203
SYMATTR InstName M1
SYMATTR Prefix X
SYMBOL voltage -1456 -1792 R0
WINDOW 3 77 51 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 {Vdrive} {PWM_OFFSET} 10n 10n {HIGH_ON_TIME} {SWITCHPERIOD})
SYMATTR InstName V5
SYMBOL schottky 224 -1008 R180
WINDOW 3 -24 132 Left 2
WINDOW 0 24 64 Left 2
SYMATTR Value PDS1040L
SYMATTR InstName D3
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 192 -832 R0
WINDOW 3 75 80 Left 2
SYMATTR Value PDS1040L
SYMATTR InstName D1
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 304 -1072 R0
WINDOW 3 -19 -73 Left 2
SYMATTR Value PDS1040L
SYMATTR InstName D2
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 336 -768 R180
WINDOW 3 128 -15 Left 2
WINDOW 0 24 64 Left 2
SYMATTR Value PDS1040L
SYMATTR InstName D4
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -1440 -1632 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 2
SYMBOL res -1504 -1792 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 2
SYMBOL Misc\\battery -1776 -976 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR SpiceLine Rser=100m
SYMATTR InstName V6
SYMATTR Value {Vin}
SYMBOL cap -1328 -944 R0
SYMATTR InstName C3
SYMATTR Value 100µ
SYMBOL voltage -960 -1200 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 0
SYMBOL voltage -960 -912 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value 0
SYMBOL ind2 -192 -976 R0
SYMATTR InstName L4
SYMATTR Value 1
SYMATTR Type ind
SYMBOL res -496 -1008 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value 5m
SYMBOL res -384 -832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 5m
SYMBOL res 896 -992 R0
SYMATTR InstName R1
SYMATTR Value {RL}
SYMBOL res 64 -1104 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 5m
TEXT -152 -1352 Left 2 ;.param DEADTIME 170n
TEXT -152 -1328 Left 2 ;.param SWFREQ 120k
TEXT 176 -1360 Left 2 !.param SWITCHPERIOD 1/SWFREQ
TEXT 176 -1336 Left 2 !.param LOW_ON_TIME (DUTY_CYCLE)*SWITCHPERIOD-DEADTIME
TEXT 176 -1312 Left 2 !.param HIGH_ON_TIME (1-DUTY_CYCLE)*SWITCHPERIOD-DEADTIME
TEXT 176 -1288 Left 2 !.param PWM_OFFSET (DUTY_CYCLE)*SWITCHPERIOD
TEXT -152 -1264 Left 2 ;.param Vin 50
TEXT -152 -1376 Left 2 ;.param DUTY_CYCLE = 0.5
TEXT 176 -1384 Left 2 ;Switching charectoristics, DO NOT MODIFY EXCEPT TO COMMENT OUT DUTY CYCLE
TEXT -168 -1016 Left 2 !K1 L4 L2 1
TEXT 176 -1256 Left 2 !.param Vdrive 15
TEXT -488 -1400 Left 2 !.tran 0 3.4m 3m
TEXT -1016 -352 Left 2 ;.step param SWFREQ list 70k 160k 5k
TEXT -1024 -384 Left 2 ;.param SWFREQ=table(j, 1,70k, 2,80k, 3,90k, 4,100k, 5,110k, 6,120k, 7,130k, 8,140k, 9,150k, 10,160k)
TEXT -360 -664 Left 2 !.meas Pin AVG -V(Vin+)*I(V6)
TEXT -360 -640 Left 2 !.meas Pout AVG abs((V(Vout+)-V(Vout-))*I(R1))
TEXT -360 -616 Left 2 !.meas eff PARAM (Pout) / (Pin)
TEXT -1400 -1800 Left 2 ;Gate Drive pair A
TEXT -360 -704 Left 2 !.meas DIODE_LOSSES AVG abs(V(Vout-)*I(D1)) + abs(V(Vout+)*I(D4)) + abs(V(Vsec+,Vout+)*I(D2)) + abs(V(Vout-,Vsec+)*I(D3))
TEXT -360 -728 Left 2 !.meas MOSFET_LOSSES AVG  abs(V(Vc+)*I(V9)) + abs(V(Vin+,Vc+)*I(V1))
TEXT -360 -592 Left 2 !.meas output_voltage AVG V(Vout+)-V(Vout-)
TEXT -360 -568 Left 2 !.meas gain AVG (V(Vout+,Vout-))/V(Vin+)
TEXT -936 -568 Left 2 ;.step param SWFREQ 70k 90k 1k
TEXT -360 -544 Left 2 !.meas Iin AVG I(V1)
TEXT -152 -1240 Left 2 ;.param Vout 100
TEXT -152 -1216 Left 2 ;.param Illum 900
TEXT 1400 -1240 Left 2 !.MODEL PDS1040L D  ( IS=6.02u RS=4.20m BV=40.0 IBV=600u\n+ CJO=2.21n  M=0.333 N=1.04 TT=50.4n )
TEXT 1416 -536 Left 2 !.SUBCKT irf135b203 1 2 3\n* SPICE3 MODEL WITH THERMAL RC NETWORK\n**************************************\n*      Model Generated by MODPEX     *\n*Copyright(c) Symmetry Design Systems*\n*         All Rights Reserved        *\n*    UNPUBLISHED LICENSED SOFTWARE   *\n*   Contains Proprietary Information *\n*      Which is The Property of      *\n*     SYMMETRY OR ITS LICENSORS      *\n*Commercial Use or Resale Restricted *\n*   by Symmetry License Agreement    *\n**************************************\n* Model generated on Feb 25, 16\n* MODEL FORMAT: SPICE3\n* Symmetry POWER MOS Model (Version 1.0)\n* External Node Designations\n* Node 1 -> Drain\n* Node 2 -> Gate\n* Node 3 -> Source\nM1 9 7 8 8 MM L=100u W=100u\n.MODEL MM NMOS LEVEL=1 IS=1e-32\n+VTO=3.84068 LAMBDA=0.0725958 KP=591.451\n+CGSO=9.84278e-05 CGDO=1.82416e-06\nRS 8 3 0.00177661\nD1 3 1 MD\n.MODEL MD D IS=6.14662e-11 RS=0.00114371 N=1.10534 BV=135\n+IBV=0.00025 EG=1 XTI=1 TT=1e-07\n+CJO=9.36221e-09 VJ=0.5 M=0.770156 FC=0.1\nRDS 3 1 3e+07\nRD 9 1 0.00472735\nRG 2 7 2.15094\nD2 4 5 MD1\n* Default values used in MD1:\n*   RS=0 EG=1.11 XTI=3.0 TT=0\n*   BV=infinite IBV=1mA\n.MODEL MD1 D IS=1e-32 N=50\n+CJO=3.80678e-09 VJ=0.5 M=0.9 FC=1e-08\nD3 0 5 MD2\n* Default values used in MD2:\n*   EG=1.11 XTI=3.0 TT=0 CJO=0\n*   BV=infinite IBV=1mA\n.MODEL MD2 D IS=1e-10 N=0.4 RS=3e-06\nRL 5 10 1\nFI2 7 9 VFI2 -1\nVFI2 4 0 0\nEV16 10 0 9 7 1\nCAP 11 10 5.48516e-09\nFI1 7 9 VFI1 -1\nVFI1 11 6 0\nRCAP 6 10 1\nD4 0 6 MD3\n* Default values used in MD3:\n*   EG=1.11 XTI=3.0 TT=0 CJO=0\n*   RS=0 BV=infinite IBV=1mA\n.MODEL MD3 D IS=1e-10 N=0.4\n.ENDS irf135b203\n*SPICE Thermal Model Subcircuit\n.SUBCKT irf135b203t 3 0\n \nR_RTHERM1         3 2  0.0337\nR_RTHERM2         2 1  0.1758\nR_RTHERM3         1 0  0.1313\nC_CTHERM1         3 2  0.0036\nC_CTHERM2         2 1  0.1164\nC_CTHERM3         1 0  0.0218\n \n.ENDS irf135b203t
TEXT -144 -1488 Left 2 !.include sim_params.txt
TEXT 376 -608 Left 2 !.meas mosfet_conduction_losses AVG tank_irms*11m* tank_irms
TEXT 416 -512 Left 2 !.meas tank_irms RMS I(C2)
